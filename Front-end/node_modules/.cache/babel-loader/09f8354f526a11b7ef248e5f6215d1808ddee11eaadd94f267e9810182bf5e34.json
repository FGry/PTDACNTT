{"ast":null,"code":"// import React, { useState } from 'react';\n\n// const UploadPatientData = () => {\n//   const [jsonData, setJsonData] = useState(null);\n\n//   // Hàm xử lý chọn file\n//   const handleFileChange = (event) => {\n//     const file = event.target.files[0];\n//     if (file && file.type === \"application/json\") {\n//       const reader = new FileReader();\n//       reader.onload = () => {\n//         try {\n//           const parsedData = JSON.parse(reader.result);\n//           setJsonData(parsedData);\n//         } catch (error) {\n//           alert(\"File không hợp lệ!\");\n//         }\n//       };\n//       reader.readAsText(file);\n//     } else {\n//       alert(\"Vui lòng chọn file JSON!\");\n//     }\n//   };\n\n//   // Hàm gửi dữ liệu từng bệnh nhân lên server\n//   const handleSubmit = async () => {\n//     if (!jsonData || !Array.isArray(jsonData)) {\n//       alert(\"Dữ liệu không hợp lệ!\");\n//       return;\n//     }\n\n//     // Lặp qua từng bệnh nhân trong jsonData và gửi từng cái một\n//     for (const patient of jsonData) {\n//       try {\n//         const response = await fetch('http://127.0.0.1:8888/api/viewsAPIBacSi/', {\n//           method: 'POST',\n//           headers: {\n//             'Content-Type': 'application/json',\n//           },\n//           body: JSON.stringify(patient), // Chỉ gửi một bệnh nhân\n//         });\n\n//         if (!response.ok) {\n//           throw new Error('Lỗi khi gửi dữ liệu');\n//         }\n\n//         const result = await response.json();\n//         console.log('Dữ liệu đã gửi thành công:', result);\n\n//       } catch (error) {\n//         console.error('Lỗi khi gửi bệnh nhân:', patient.hoTenBenhNhan, error);\n//       }\n//     }\n//   };\n\n//   return (\n//     <div>\n//       <h1>Upload dữ liệu bệnh nhân</h1>\n\n//       {/* Input chọn file JSON */}\n//       <input \n//         type=\"file\" \n//         accept=\".json\" \n//         onChange={handleFileChange} \n//       />\n//       <button onClick={handleSubmit}>Gửi lên Server</button>\n\n//       {/* Hiển thị dữ liệu JSON nếu có */}\n//       {jsonData && (\n//         <div>\n//           <h3>Dữ liệu JSON đã tải lên:</h3>\n//           <pre>{JSON.stringify(jsonData, null, 2)}</pre>\n//         </div>\n//       )}\n\n//       {/* Nút gửi dữ liệu lên server */}\n\n//     </div>\n//   );\n// };\n\n// export default UploadPatientData;\n\n// import React, { useState, useEffect } from 'react';\n\n// const UploadPatientData = () => {\n//   const [jsonData, setJsonData] = useState([]);\n//   const [isLoading, setIsLoading] = useState(false);\n//   const [isSuccess, setIsSuccess] = useState(null);\n\n//   // Tải dữ liệu từ file JSON khi component được render\n//   useEffect(() => {\n//     // Đọc dữ liệu từ file JSON trong thư mục public\n//     fetch('./abc.json') // Đảm bảo bạn có file JSON trong thư mục public\n//       .then((response) => response.json())\n//       .then((data) => {\n//         setJsonData(data);\n//       })\n//       .catch((error) => {\n//         console.error('Lỗi khi tải dữ liệu:', error);\n//       });\n//   }, []);\n\n//   const sendData = async () => {\n//     setIsLoading(true);\n//     setIsSuccess(null);\n\n//     for (let patient of jsonData) {\n//       const { symptoms, diagnosis, treatment } = patient;\n\n//       // Cập nhật trường theo yêu cầu của API\n//       const dataToSend = {\n//         trieuChung: symptoms,   // `symptoms` -> `trieuChung`\n//         chuanDoan: diagnosis,   // `diagnosis` -> `chuanDoan`\n//         dieuTri: treatment,     // `treatment` -> `dieuTri`\n//         benhNhan: patient.id    // Nếu cần thêm thông tin về bệnh nhân, có thể là `id` hoặc thông tin khác\n//       };\n\n//       try {\n//         const response = await fetch('http://127.0.0.1:8888/api/viewsAPIHoSo/', {\n//           method: 'POST',\n//           headers: {\n//             'Content-Type': 'application/json',\n//           },\n//           body: JSON.stringify(dataToSend),\n//         });\n\n//         if (response.ok) {\n//           const result = await response.json();\n//           console.log('Dữ liệu bệnh nhân đã gửi thành công:', result);\n//         } else {\n//           // Lấy thông tin chi tiết lỗi từ server để debug\n//           const errorDetails = await response.json();\n//           console.error('Lỗi từ server:', errorDetails);\n//           setIsSuccess(false);\n//           setIsLoading(false);\n//           return; // Dừng nếu có lỗi\n//         }\n//       } catch (error) {\n//         console.error('Lỗi khi gửi dữ liệu:', error);\n//         setIsSuccess(false);\n//         setIsLoading(false);\n//         return; // Dừng nếu có lỗi\n//       }\n//     }\n\n//     setIsSuccess(true);\n//     setIsLoading(false);\n//   };\n\n//   return (\n//     <div>\n//       <h1>Upload Dữ Liệu Bệnh Nhân</h1>\n\n//       {/* Nút gửi dữ liệu */}\n//       <button onClick={sendData} disabled={isLoading || jsonData.length === 0}>\n//         {isLoading ? 'Đang gửi...' : 'Gửi Dữ Liệu'}\n//       </button>\n\n//       {/* Thông báo thành công hay thất bại */}\n//       {isSuccess === true && <p>Gửi dữ liệu thành công!</p>}\n//       {isSuccess === false && <p>Đã xảy ra lỗi khi gửi dữ liệu!</p>}\n//       {jsonData.length === 0 && !isLoading && <p>Đang tải dữ liệu...</p>}\n//     </div>\n//   );\n// };\n\n// export default UploadPatientData;","map":{"version":3,"names":[],"sources":["D:/React/Demo/source/Front-end/src/UploadPatientData.js"],"sourcesContent":["// import React, { useState } from 'react';\r\n\r\n// const UploadPatientData = () => {\r\n//   const [jsonData, setJsonData] = useState(null);\r\n\r\n//   // Hàm xử lý chọn file\r\n//   const handleFileChange = (event) => {\r\n//     const file = event.target.files[0];\r\n//     if (file && file.type === \"application/json\") {\r\n//       const reader = new FileReader();\r\n//       reader.onload = () => {\r\n//         try {\r\n//           const parsedData = JSON.parse(reader.result);\r\n//           setJsonData(parsedData);\r\n//         } catch (error) {\r\n//           alert(\"File không hợp lệ!\");\r\n//         }\r\n//       };\r\n//       reader.readAsText(file);\r\n//     } else {\r\n//       alert(\"Vui lòng chọn file JSON!\");\r\n//     }\r\n//   };\r\n\r\n//   // Hàm gửi dữ liệu từng bệnh nhân lên server\r\n//   const handleSubmit = async () => {\r\n//     if (!jsonData || !Array.isArray(jsonData)) {\r\n//       alert(\"Dữ liệu không hợp lệ!\");\r\n//       return;\r\n//     }\r\n\r\n//     // Lặp qua từng bệnh nhân trong jsonData và gửi từng cái một\r\n//     for (const patient of jsonData) {\r\n//       try {\r\n//         const response = await fetch('http://127.0.0.1:8888/api/viewsAPIBacSi/', {\r\n//           method: 'POST',\r\n//           headers: {\r\n//             'Content-Type': 'application/json',\r\n//           },\r\n//           body: JSON.stringify(patient), // Chỉ gửi một bệnh nhân\r\n//         });\r\n\r\n//         if (!response.ok) {\r\n//           throw new Error('Lỗi khi gửi dữ liệu');\r\n//         }\r\n\r\n//         const result = await response.json();\r\n//         console.log('Dữ liệu đã gửi thành công:', result);\r\n\r\n//       } catch (error) {\r\n//         console.error('Lỗi khi gửi bệnh nhân:', patient.hoTenBenhNhan, error);\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div>\r\n//       <h1>Upload dữ liệu bệnh nhân</h1>\r\n\r\n//       {/* Input chọn file JSON */}\r\n//       <input \r\n//         type=\"file\" \r\n//         accept=\".json\" \r\n//         onChange={handleFileChange} \r\n//       />\r\n//       <button onClick={handleSubmit}>Gửi lên Server</button>\r\n      \r\n//       {/* Hiển thị dữ liệu JSON nếu có */}\r\n//       {jsonData && (\r\n//         <div>\r\n//           <h3>Dữ liệu JSON đã tải lên:</h3>\r\n//           <pre>{JSON.stringify(jsonData, null, 2)}</pre>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Nút gửi dữ liệu lên server */}\r\n\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default UploadPatientData;\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n\r\n// const UploadPatientData = () => {\r\n//   const [jsonData, setJsonData] = useState([]);\r\n//   const [isLoading, setIsLoading] = useState(false);\r\n//   const [isSuccess, setIsSuccess] = useState(null);\r\n\r\n//   // Tải dữ liệu từ file JSON khi component được render\r\n//   useEffect(() => {\r\n//     // Đọc dữ liệu từ file JSON trong thư mục public\r\n//     fetch('./abc.json') // Đảm bảo bạn có file JSON trong thư mục public\r\n//       .then((response) => response.json())\r\n//       .then((data) => {\r\n//         setJsonData(data);\r\n//       })\r\n//       .catch((error) => {\r\n//         console.error('Lỗi khi tải dữ liệu:', error);\r\n//       });\r\n//   }, []);\r\n\r\n//   const sendData = async () => {\r\n//     setIsLoading(true);\r\n//     setIsSuccess(null);\r\n\r\n//     for (let patient of jsonData) {\r\n//       const { symptoms, diagnosis, treatment } = patient;\r\n\r\n//       // Cập nhật trường theo yêu cầu của API\r\n//       const dataToSend = {\r\n//         trieuChung: symptoms,   // `symptoms` -> `trieuChung`\r\n//         chuanDoan: diagnosis,   // `diagnosis` -> `chuanDoan`\r\n//         dieuTri: treatment,     // `treatment` -> `dieuTri`\r\n//         benhNhan: patient.id    // Nếu cần thêm thông tin về bệnh nhân, có thể là `id` hoặc thông tin khác\r\n//       };\r\n\r\n//       try {\r\n//         const response = await fetch('http://127.0.0.1:8888/api/viewsAPIHoSo/', {\r\n//           method: 'POST',\r\n//           headers: {\r\n//             'Content-Type': 'application/json',\r\n//           },\r\n//           body: JSON.stringify(dataToSend),\r\n//         });\r\n\r\n//         if (response.ok) {\r\n//           const result = await response.json();\r\n//           console.log('Dữ liệu bệnh nhân đã gửi thành công:', result);\r\n//         } else {\r\n//           // Lấy thông tin chi tiết lỗi từ server để debug\r\n//           const errorDetails = await response.json();\r\n//           console.error('Lỗi từ server:', errorDetails);\r\n//           setIsSuccess(false);\r\n//           setIsLoading(false);\r\n//           return; // Dừng nếu có lỗi\r\n//         }\r\n//       } catch (error) {\r\n//         console.error('Lỗi khi gửi dữ liệu:', error);\r\n//         setIsSuccess(false);\r\n//         setIsLoading(false);\r\n//         return; // Dừng nếu có lỗi\r\n//       }\r\n//     }\r\n\r\n//     setIsSuccess(true);\r\n//     setIsLoading(false);\r\n//   };\r\n\r\n//   return (\r\n//     <div>\r\n//       <h1>Upload Dữ Liệu Bệnh Nhân</h1>\r\n\r\n//       {/* Nút gửi dữ liệu */}\r\n//       <button onClick={sendData} disabled={isLoading || jsonData.length === 0}>\r\n//         {isLoading ? 'Đang gửi...' : 'Gửi Dữ Liệu'}\r\n//       </button>\r\n\r\n//       {/* Thông báo thành công hay thất bại */}\r\n//       {isSuccess === true && <p>Gửi dữ liệu thành công!</p>}\r\n//       {isSuccess === false && <p>Đã xảy ra lỗi khi gửi dữ liệu!</p>}\r\n//       {jsonData.length === 0 && !isLoading && <p>Đang tải dữ liệu...</p>}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default UploadPatientData;\r\n"],"mappings":"AAAA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}