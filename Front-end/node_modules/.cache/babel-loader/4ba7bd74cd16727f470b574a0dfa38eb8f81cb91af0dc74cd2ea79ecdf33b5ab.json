{"ast":null,"code":"var _jsxFileName = \"D:\\\\React\\\\Demo\\\\source\\\\Front-end\\\\src\\\\UploadPatientData.js\",\n  _s = $RefreshSig$();\n// import React, { useState } from 'react';\n\n// const UploadPatientData = () => {\n//   const [jsonData, setJsonData] = useState(null);\n\n//   // Hàm xử lý chọn file\n//   const handleFileChange = (event) => {\n//     const file = event.target.files[0];\n//     if (file && file.type === \"application/json\") {\n//       const reader = new FileReader();\n//       reader.onload = () => {\n//         try {\n//           const parsedData = JSON.parse(reader.result);\n//           setJsonData(parsedData);\n//         } catch (error) {\n//           alert(\"File không hợp lệ!\");\n//         }\n//       };\n//       reader.readAsText(file);\n//     } else {\n//       alert(\"Vui lòng chọn file JSON!\");\n//     }\n//   };\n\n//   // Hàm gửi dữ liệu từng bệnh nhân lên server\n//   const handleSubmit = async () => {\n//     if (!jsonData || !Array.isArray(jsonData)) {\n//       alert(\"Dữ liệu không hợp lệ!\");\n//       return;\n//     }\n\n//     // Lặp qua từng bệnh nhân trong jsonData và gửi từng cái một\n//     for (const patient of jsonData) {\n//       try {\n//         const response = await fetch('http://127.0.0.1:8888/api/viewsAPIBacSi/', {\n//           method: 'POST',\n//           headers: {\n//             'Content-Type': 'application/json',\n//           },\n//           body: JSON.stringify(patient), // Chỉ gửi một bệnh nhân\n//         });\n\n//         if (!response.ok) {\n//           throw new Error('Lỗi khi gửi dữ liệu');\n//         }\n\n//         const result = await response.json();\n//         console.log('Dữ liệu đã gửi thành công:', result);\n\n//       } catch (error) {\n//         console.error('Lỗi khi gửi bệnh nhân:', patient.hoTenBenhNhan, error);\n//       }\n//     }\n//   };\n\n//   return (\n//     <div>\n//       <h1>Upload dữ liệu bệnh nhân</h1>\n\n//       {/* Input chọn file JSON */}\n//       <input \n//         type=\"file\" \n//         accept=\".json\" \n//         onChange={handleFileChange} \n//       />\n//       <button onClick={handleSubmit}>Gửi lên Server</button>\n\n//       {/* Hiển thị dữ liệu JSON nếu có */}\n//       {jsonData && (\n//         <div>\n//           <h3>Dữ liệu JSON đã tải lên:</h3>\n//           <pre>{JSON.stringify(jsonData, null, 2)}</pre>\n//         </div>\n//       )}\n\n//       {/* Nút gửi dữ liệu lên server */}\n\n//     </div>\n//   );\n// };\n\n// export default UploadPatientData;\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadPatientData = () => {\n  _s();\n  const [jsonData, setJsonData] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(null);\n\n  // Dữ liệu mẫu bạn đã cung cấp\n  const data = [];\n\n  // Hàm gửi dữ liệu bệnh nhân lên server\n  const sendData = async () => {\n    setIsLoading(true);\n    setIsSuccess(null);\n    for (let patient of data) {\n      const {\n        symptoms,\n        diagnosis,\n        treatment\n      } = patient;\n      try {\n        const response = await fetch('http://127.0.0.1:8888/api/viewsAPIHoSo/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            symptoms,\n            diagnosis,\n            treatment\n          })\n        });\n        if (response.ok) {\n          const result = await response.json();\n          console.log('Dữ liệu bệnh nhân đã gửi thành công:', result);\n        } else {\n          throw new Error('Lỗi khi gửi dữ liệu');\n        }\n      } catch (error) {\n        console.error('Lỗi khi gửi dữ liệu:', error);\n        setIsSuccess(false);\n        setIsLoading(false);\n        return; // Dừng ngay nếu có lỗi\n      }\n    }\n    setIsSuccess(true);\n    setIsLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Upload D\\u1EEF Li\\u1EC7u B\\u1EC7nh Nh\\xE2n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: sendData,\n      disabled: isLoading,\n      children: isLoading ? 'Đang gửi...' : 'Gửi Dữ Liệu'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), isSuccess === true && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"G\\u1EEDi d\\u1EEF li\\u1EC7u th\\xE0nh c\\xF4ng!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 30\n    }, this), isSuccess === false && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0110\\xE3 x\\u1EA3y ra l\\u1ED7i khi g\\u1EEDi d\\u1EEF li\\u1EC7u!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadPatientData, \"2BIL8vAcfoXw23IyHrKimmfOJ68=\");\n_c = UploadPatientData;\nexport default UploadPatientData;\nvar _c;\n$RefreshReg$(_c, \"UploadPatientData\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","UploadPatientData","_s","jsonData","setJsonData","isLoading","setIsLoading","isSuccess","setIsSuccess","data","sendData","patient","symptoms","diagnosis","treatment","response","fetch","method","headers","body","JSON","stringify","ok","result","json","console","log","Error","error","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","_c","$RefreshReg$"],"sources":["D:/React/Demo/source/Front-end/src/UploadPatientData.js"],"sourcesContent":["// import React, { useState } from 'react';\r\n\r\n// const UploadPatientData = () => {\r\n//   const [jsonData, setJsonData] = useState(null);\r\n\r\n//   // Hàm xử lý chọn file\r\n//   const handleFileChange = (event) => {\r\n//     const file = event.target.files[0];\r\n//     if (file && file.type === \"application/json\") {\r\n//       const reader = new FileReader();\r\n//       reader.onload = () => {\r\n//         try {\r\n//           const parsedData = JSON.parse(reader.result);\r\n//           setJsonData(parsedData);\r\n//         } catch (error) {\r\n//           alert(\"File không hợp lệ!\");\r\n//         }\r\n//       };\r\n//       reader.readAsText(file);\r\n//     } else {\r\n//       alert(\"Vui lòng chọn file JSON!\");\r\n//     }\r\n//   };\r\n\r\n//   // Hàm gửi dữ liệu từng bệnh nhân lên server\r\n//   const handleSubmit = async () => {\r\n//     if (!jsonData || !Array.isArray(jsonData)) {\r\n//       alert(\"Dữ liệu không hợp lệ!\");\r\n//       return;\r\n//     }\r\n\r\n//     // Lặp qua từng bệnh nhân trong jsonData và gửi từng cái một\r\n//     for (const patient of jsonData) {\r\n//       try {\r\n//         const response = await fetch('http://127.0.0.1:8888/api/viewsAPIBacSi/', {\r\n//           method: 'POST',\r\n//           headers: {\r\n//             'Content-Type': 'application/json',\r\n//           },\r\n//           body: JSON.stringify(patient), // Chỉ gửi một bệnh nhân\r\n//         });\r\n\r\n//         if (!response.ok) {\r\n//           throw new Error('Lỗi khi gửi dữ liệu');\r\n//         }\r\n\r\n//         const result = await response.json();\r\n//         console.log('Dữ liệu đã gửi thành công:', result);\r\n\r\n//       } catch (error) {\r\n//         console.error('Lỗi khi gửi bệnh nhân:', patient.hoTenBenhNhan, error);\r\n//       }\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div>\r\n//       <h1>Upload dữ liệu bệnh nhân</h1>\r\n\r\n//       {/* Input chọn file JSON */}\r\n//       <input \r\n//         type=\"file\" \r\n//         accept=\".json\" \r\n//         onChange={handleFileChange} \r\n//       />\r\n//       <button onClick={handleSubmit}>Gửi lên Server</button>\r\n      \r\n//       {/* Hiển thị dữ liệu JSON nếu có */}\r\n//       {jsonData && (\r\n//         <div>\r\n//           <h3>Dữ liệu JSON đã tải lên:</h3>\r\n//           <pre>{JSON.stringify(jsonData, null, 2)}</pre>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Nút gửi dữ liệu lên server */}\r\n\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default UploadPatientData;\r\nimport React, { useState } from 'react';\r\n\r\nconst UploadPatientData = () => {\r\n  const [jsonData, setJsonData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isSuccess, setIsSuccess] = useState(null);\r\n\r\n  // Dữ liệu mẫu bạn đã cung cấp\r\n  const data = [\r\n    \r\n  ];\r\n\r\n  // Hàm gửi dữ liệu bệnh nhân lên server\r\n  const sendData = async () => {\r\n    setIsLoading(true);\r\n    setIsSuccess(null);\r\n\r\n    for (let patient of data) {\r\n      const { symptoms, diagnosis, treatment } = patient;\r\n\r\n      try {\r\n        const response = await fetch('http://127.0.0.1:8888/api/viewsAPIHoSo/', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({ symptoms, diagnosis, treatment }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          const result = await response.json();\r\n          console.log('Dữ liệu bệnh nhân đã gửi thành công:', result);\r\n        } else {\r\n          throw new Error('Lỗi khi gửi dữ liệu');\r\n        }\r\n      } catch (error) {\r\n        console.error('Lỗi khi gửi dữ liệu:', error);\r\n        setIsSuccess(false);\r\n        setIsLoading(false);\r\n        return; // Dừng ngay nếu có lỗi\r\n      }\r\n    }\r\n\r\n    setIsSuccess(true);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Upload Dữ Liệu Bệnh Nhân</h1>\r\n\r\n      {/* Nút gửi dữ liệu */}\r\n      <button onClick={sendData} disabled={isLoading}>\r\n        {isLoading ? 'Đang gửi...' : 'Gửi Dữ Liệu'}\r\n      </button>\r\n\r\n      {/* Thông báo thành công hay thất bại */}\r\n      {isSuccess === true && <p>Gửi dữ liệu thành công!</p>}\r\n      {isSuccess === false && <p>Đã xảy ra lỗi khi gửi dữ liệu!</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadPatientData;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}